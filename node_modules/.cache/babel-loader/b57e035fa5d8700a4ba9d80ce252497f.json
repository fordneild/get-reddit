{"ast":null,"code":"import fetchData from './useFetch';\nimport defaultInstagram from \"../assets/defaultInstagram\";\n\nconst fetchInstagramAccountPosts = async (account, num) => {\n  const page = await fetchData(`https://www.instagram.com/${account}/?__a=1`);\n\n  try {\n    let posts = page.graphql.user.edge_owner_to_timeline_media.edges.filter(post => post.node.__typename === \"GraphImage\").map(post => {\n      return {\n        title: null,\n        url: post.node.display_url,\n        pipe: `@${account}`\n      };\n    });\n    return posts;\n  } catch (e) {\n    return [];\n  }\n};\n\nconst fetchInstagramHashTagPosts = async term => {\n  const page = await fetchData(`https://www.instagram.com/explore/tags/${term}/?__a=1`);\n\n  try {\n    return page.graphql.hashtag.edge_hashtag_to_media.edges.filter(post => post.node.__typename === \"GraphImage\").map(post => {\n      return {\n        title: null,\n        url: post.node.display_url,\n        pipe: `#${term}`\n      };\n    });\n  } catch (e) {\n    return [];\n  }\n};\n\nconst loadInstagramPosts = async () => {\n  const {\n    terms,\n    accounts\n  } = defaultInstagram;\n  const instas = await Promise.all([...terms.map(async term => {\n    return await fetchInstagramHashTagPosts(term);\n  }), ...accounts.map(async account => {\n    return await fetchInstagramAccountPosts(account);\n  })]);\n  let cleanedInstas = [].concat(...instas);\n  return cleanedInstas;\n};\n\nexport default loadInstagramPosts;","map":{"version":3,"sources":["/Users/fordneild/workdir/get-reddit/src/Services/instagramFetch.js"],"names":["fetchData","defaultInstagram","fetchInstagramAccountPosts","account","num","page","posts","graphql","user","edge_owner_to_timeline_media","edges","filter","post","node","__typename","map","title","url","display_url","pipe","e","fetchInstagramHashTagPosts","term","hashtag","edge_hashtag_to_media","loadInstagramPosts","terms","accounts","instas","Promise","all","cleanedInstas","concat"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,YAAtB;AACA,OAAOC,gBAAP,MAA6B,4BAA7B;;AAEA,MAAMC,0BAA0B,GAAG,OAAOC,OAAP,EAAgBC,GAAhB,KAAwB;AACvD,QAAMC,IAAI,GAAG,MAAML,SAAS,CAAE,6BAA4BG,OAAQ,SAAtC,CAA5B;;AACA,MAAI;AACF,QAAIG,KAAK,GAAGD,IAAI,CAACE,OAAL,CAAaC,IAAb,CAAkBC,4BAAlB,CAA+CC,KAA/C,CACTC,MADS,CACFC,IAAI,IAAIA,IAAI,CAACC,IAAL,CAAUC,UAAV,KAAyB,YAD/B,EAETC,GAFS,CAELH,IAAI,IAAI;AACX,aAAO;AACLI,QAAAA,KAAK,EAAE,IADF;AAELC,QAAAA,GAAG,EAAEL,IAAI,CAACC,IAAL,CAAUK,WAFV;AAGLC,QAAAA,IAAI,EAAG,IAAGhB,OAAQ;AAHb,OAAP;AAKD,KARS,CAAZ;AASA,WAAOG,KAAP;AACD,GAXD,CAWE,OAAOc,CAAP,EAAU;AACV,WAAO,EAAP;AACD;AACF,CAhBH;;AAkBA,MAAMC,0BAA0B,GAAG,MAAMC,IAAN,IAAc;AAC7C,QAAMjB,IAAI,GAAG,MAAML,SAAS,CACzB,0CAAyCsB,IAAK,SADrB,CAA5B;;AAGA,MAAI;AACF,WAAOjB,IAAI,CAACE,OAAL,CAAagB,OAAb,CAAqBC,qBAArB,CAA2Cd,KAA3C,CACJC,MADI,CACGC,IAAI,IAAIA,IAAI,CAACC,IAAL,CAAUC,UAAV,KAAyB,YADpC,EAEJC,GAFI,CAEAH,IAAI,IAAI;AACX,aAAO;AACLI,QAAAA,KAAK,EAAE,IADF;AAELC,QAAAA,GAAG,EAAEL,IAAI,CAACC,IAAL,CAAUK,WAFV;AAGLC,QAAAA,IAAI,EAAG,IAAGG,IAAK;AAHV,OAAP;AAKD,KARI,CAAP;AASD,GAVD,CAUE,OAAOF,CAAP,EAAU;AACV,WAAO,EAAP;AACD;AACF,CAjBH;;AAmBA,MAAMK,kBAAkB,GAAG,YAAY;AACnC,QAAM;AAACC,IAAAA,KAAD;AAAQC,IAAAA;AAAR,MAAoB1B,gBAA1B;AACA,QAAM2B,MAAM,GAAG,MAAMC,OAAO,CAACC,GAAR,CACnB,CAAC,GAAGJ,KAAK,CAACX,GAAN,CAAU,MAAMO,IAAN,IAAc;AAC1B,WAAO,MAAMD,0BAA0B,CAACC,IAAD,CAAvC;AACD,GAFG,CAAJ,EAEG,GAAGK,QAAQ,CAACZ,GAAT,CAAa,MAAMZ,OAAN,IAAiB;AAClC,WAAO,MAAMD,0BAA0B,CAACC,OAAD,CAAvC;AACD,GAFK,CAFN,CADmB,CAArB;AAOA,MAAI4B,aAAa,GAAG,GAAGC,MAAH,CAAU,GAAGJ,MAAb,CAApB;AACA,SAAOG,aAAP;AACD,CAXH;;AAaE,eAAeN,kBAAf","sourcesContent":["import fetchData from './useFetch'\nimport defaultInstagram from \"../assets/defaultInstagram\"\n\nconst fetchInstagramAccountPosts = async (account, num) => {\n    const page = await fetchData(`https://www.instagram.com/${account}/?__a=1`);\n    try {\n      let posts = page.graphql.user.edge_owner_to_timeline_media.edges\n        .filter(post => post.node.__typename === \"GraphImage\")\n        .map(post => {\n          return {\n            title: null,\n            url: post.node.display_url,\n            pipe: `@${account}`\n          };\n        });\n      return posts;\n    } catch (e) {\n      return []\n    }\n  };\n\nconst fetchInstagramHashTagPosts = async term => {\n    const page = await fetchData(\n      `https://www.instagram.com/explore/tags/${term}/?__a=1`\n    );\n    try {\n      return page.graphql.hashtag.edge_hashtag_to_media.edges\n        .filter(post => post.node.__typename === \"GraphImage\")\n        .map(post => {\n          return {\n            title: null,\n            url: post.node.display_url,\n            pipe: `#${term}`\n          };\n        });\n    } catch (e) {\n      return []\n    }\n  };\n\nconst loadInstagramPosts = async () => {\n    const {terms, accounts} = defaultInstagram\n    const instas = await Promise.all(\n      [...terms.map(async term => {\n        return await fetchInstagramHashTagPosts(term);\n      }),...accounts.map(async account => {\n        return await fetchInstagramAccountPosts(account);\n      })]\n    );\n    let cleanedInstas = [].concat(...instas)\n    return cleanedInstas\n  };\n\n  export default loadInstagramPosts"]},"metadata":{},"sourceType":"module"}
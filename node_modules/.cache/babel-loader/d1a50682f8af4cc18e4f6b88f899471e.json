{"ast":null,"code":"var _jsxFileName = \"/Users/fordneild/workdir/get-reddit/src/Components/Settings/index.js\";\nimport React, { useEffect, useState } from \"react\";\nimport \"./Settings.scss\";\nimport defaultSubreddits from \"../../assets/defaultSubreddits\";\nimport defaultInstagram from \"../../assets/defaultInstagram\";\nimport LocalStorage from \"../../Services/LocalStorage.js\";\nimport Form from \"../Form/index\";\nconst forms = {\n  reddit: defaultSubreddits,\n  instaTags: defaultInstagram.terms,\n  instaAccounds: defaultInstagram.accounts\n};\n\nconst Settings = ({\n  show = false\n}) => {\n  const [subs, setSubs] = useState([]);\n  const [instaTags, setInstaTags] = useState([]);\n  const [instaAccounts, setInstaAccounts] = useState([]);\n  useEffect(() => {\n    const loadSettings = async () => {\n      const {\n        terms,\n        accounts\n      } = defaultInstagram;\n\n      const checkSetFlag = async () => {\n        const setFlag = await LocalStorage.get(\"setFlag\");\n\n        if (!setFlag) {\n          const initLS = async () => {\n            console.log(\"initalizing LS\");\n            await Promise.all([LocalStorage.set(\"reddit\", defaultSubreddits), LocalStorage.set(\"instaTags\", terms), LocalStorage.set(\"instaAccounts\", accounts)]);\n            LocalStorage.set(\"setFlag\", true);\n          };\n\n          initLS();\n        }\n      };\n\n      const initState = async () => {\n        //blocking is a bad idea but these are so small so i think its ok for now\n        const subreddits = await LocalStorage.get(\"reddit\");\n        setSubs(subreddits);\n        await LocalStorage.get(\"instaTags\", terms);\n        const instagramTags = await LocalStorage.get(\"instaTags\");\n        setInstaTags(instagramTags);\n        await LocalStorage.get(\"instaAccounts\", accounts);\n        const instagramAccounts = await LocalStorage.get(\"instaAccounts\");\n        setInstaAccounts(instagramAccounts);\n      }; //if the user doesnt have local storage going yet, then we intialize it\n\n\n      await checkSetFlag();\n      initState();\n      setSubs();\n    };\n\n    loadSettings();\n  }, []);\n\n  const refresh = async key => {\n    const setters = {\n      reddit: setSubs,\n      instaTags: setInstaTags,\n      instaAccounds: setInstaAccounts\n    };\n    const data = await LocalStorage.get(key);\n    setters[key](data);\n  };\n\n  return React.createElement(\"div\", {\n    className: `settings--container ${show ? \"\" : \"hide\"}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, Object.entries(forms).map((form, index) => {\n    const [LSKey, data] = form;\n    return React.createElement(Form, {\n      LSKey: LSKey,\n      defaults: data,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    });\n  }));\n};\n\nexport default Settings;","map":{"version":3,"sources":["/Users/fordneild/workdir/get-reddit/src/Components/Settings/index.js"],"names":["React","useEffect","useState","defaultSubreddits","defaultInstagram","LocalStorage","Form","forms","reddit","instaTags","terms","instaAccounds","accounts","Settings","show","subs","setSubs","setInstaTags","instaAccounts","setInstaAccounts","loadSettings","checkSetFlag","setFlag","get","initLS","console","log","Promise","all","set","initState","subreddits","instagramTags","instagramAccounts","refresh","key","setters","data","Object","entries","map","form","index","LSKey"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"./Settings.scss\";\nimport defaultSubreddits from \"../../assets/defaultSubreddits\";\nimport defaultInstagram from \"../../assets/defaultInstagram\";\n\nimport LocalStorage from \"../../Services/LocalStorage.js\";\nimport Form from \"../Form/index\";\n\nconst forms  = {\n  reddit: defaultSubreddits,\n  instaTags: defaultInstagram.terms,\n  instaAccounds: defaultInstagram.accounts,\n}\n\nconst Settings = ({ show = false }) => {\n  const [subs, setSubs] = useState([]);\n  const [instaTags, setInstaTags] = useState([]);\n  const [instaAccounts, setInstaAccounts] = useState([]);\n  \n\n  useEffect(() => {\n    const loadSettings = async () => {\n      const { terms, accounts } = defaultInstagram;\n      const checkSetFlag = async () => {\n        const setFlag = await LocalStorage.get(\"setFlag\");\n        if (!setFlag) {\n          const initLS = async () => {\n            console.log(\"initalizing LS\");\n            await Promise.all([\n              LocalStorage.set(\"reddit\", defaultSubreddits),\n              LocalStorage.set(\"instaTags\", terms),\n              LocalStorage.set(\"instaAccounts\", accounts)\n            ]);\n\n            LocalStorage.set(\"setFlag\", true);\n          };\n          initLS();\n        }\n      };\n      const initState = async () => {\n        //blocking is a bad idea but these are so small so i think its ok for now\n        const subreddits = await LocalStorage.get(\"reddit\");\n        setSubs(subreddits);\n        await LocalStorage.get(\"instaTags\", terms);\n        const instagramTags = await LocalStorage.get(\"instaTags\");\n        setInstaTags(instagramTags);\n        await LocalStorage.get(\"instaAccounts\", accounts);\n        const instagramAccounts = await LocalStorage.get(\"instaAccounts\");\n        setInstaAccounts(instagramAccounts);\n      };\n      //if the user doesnt have local storage going yet, then we intialize it\n      await checkSetFlag();\n      initState();\n\n      setSubs();\n    };\n    loadSettings();\n  }, []);\n\n  const refresh = async (key) => {\n    const setters = {\n      reddit: setSubs,\n      instaTags: setInstaTags,\n      instaAccounds: setInstaAccounts  \n    }\n    const data = await LocalStorage.get(key);\n    setters[key](data)\n  }\n\n  return (\n    <div className={`settings--container ${show ? \"\" : \"hide\"}`}>\n      {Object.entries(forms).map((form, index) => {\n        const [LSKey, data] = form\n        return <Form LSKey={LSKey} defaults={data} />\n      })}\n    </div>\n  );\n};\n\nexport default Settings;\n"]},"metadata":{},"sourceType":"module"}
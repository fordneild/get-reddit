{"ast":null,"code":"var _jsxFileName = \"/Users/fordneild/workdir/get-reddit/src/Components/Feed/FeedController.js\";\nimport React, { useState, useEffect } from \"react\";\nimport FeedView from \"./FeedView.js\";\nimport redditFetch from \"../../Services/redditFetch\";\nimport instagramFetch from \"../../Services/instagramFetch\";\nimport Nav from '../Nav/index';\n\nconst FeedController = () => {\n  //keep track of all posts we want to show to the user eventually\n  const [posts, setPosts] = useState([]); //on mount, load urls of images\n\n  useEffect(() => {\n    //loads all websites\n    const loadPosts = async () => {\n      //load each website async so they do not block each other\n      const loadReddit = async () => {\n        const redditPosts = await redditFetch();\n        addPosts(redditPosts);\n      };\n\n      const loadInstagram = async () => {\n        const instagramPosts = await instagramFetch();\n        addPosts(instagramPosts);\n      };\n\n      loadInstagram();\n      loadReddit();\n    };\n\n    loadPosts();\n  }, []);\n\n  const addPosts = newPosts => {\n    setPosts(prevPosts => {\n      const posts = [...prevPosts, ...newPosts]; //shuffle the posts when we load them\n      //TODO: sort by prefrence\n\n      for (let i = posts.length - 1; i > 0; i--) {\n        let j = Math.floor(Math.random() * (i + 1));\n        let temp = posts[i];\n        posts[i] = posts[j];\n        posts[j] = temp;\n      }\n\n      return posts;\n    });\n  };\n\n  const refreshPosts = () => {\n    setPosts([]);\n\n    const loadPosts = async () => {\n      //load each website async so they do not block each other\n      const loadReddit = async () => {\n        const redditPosts = await redditFetch();\n        addPosts(redditPosts);\n      };\n\n      const loadInstagram = async () => {\n        const instagramPosts = await instagramFetch();\n        addPosts(instagramPosts);\n      };\n\n      loadInstagram();\n      loadReddit();\n    };\n\n    loadPosts();\n  };\n\n  const removePostByPipe = () => {//TODO\n  };\n\n  const getPosts = n => {\n    const toReturn = posts.slice(0, n);\n    setPosts(prevPosts => {\n      prevPosts.splice(0, n);\n      return prevPosts;\n    });\n    return toReturn;\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(FeedView, {\n    getPosts: getPosts,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }), \";\", React.createElement(Nav, {\n    refreshPosts: refreshPosts,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }));\n};\n\nexport default FeedController;","map":{"version":3,"sources":["/Users/fordneild/workdir/get-reddit/src/Components/Feed/FeedController.js"],"names":["React","useState","useEffect","FeedView","redditFetch","instagramFetch","Nav","FeedController","posts","setPosts","loadPosts","loadReddit","redditPosts","addPosts","loadInstagram","instagramPosts","newPosts","prevPosts","i","length","j","Math","floor","random","temp","refreshPosts","removePostByPipe","getPosts","n","toReturn","slice","splice"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport FeedView from \"./FeedView.js\";\nimport redditFetch from \"../../Services/redditFetch\";\nimport instagramFetch from \"../../Services/instagramFetch\";\nimport Nav from '../Nav/index'\n\nconst FeedController = () => {\n  //keep track of all posts we want to show to the user eventually\n  const [posts, setPosts] = useState([]);\n\n  //on mount, load urls of images\n  useEffect(() => {\n    //loads all websites\n    const loadPosts = async () => {\n      //load each website async so they do not block each other\n      const loadReddit = async () => {\n        const redditPosts = await redditFetch();\n        addPosts(redditPosts);\n      };\n      const loadInstagram = async () => {\n        const instagramPosts = await instagramFetch();\n        addPosts(instagramPosts);\n      };\n\n      loadInstagram();\n      loadReddit();\n    };\n    loadPosts();\n  }, []);\n\n  const addPosts = newPosts => {\n    setPosts(prevPosts => {\n      const posts = [...prevPosts, ...newPosts];\n      //shuffle the posts when we load them\n      //TODO: sort by prefrence\n      for (let i = posts.length - 1; i > 0; i--) {\n        let j = Math.floor(Math.random() * (i + 1));\n        let temp = posts[i];\n        posts[i] = posts[j];\n        posts[j] = temp;\n      }\n      return posts;\n    });\n  };\n\n  const refreshPosts = () => {\n    setPosts([])\n    const loadPosts = async () => {\n      //load each website async so they do not block each other\n      const loadReddit = async () => {\n        const redditPosts = await redditFetch();\n        addPosts(redditPosts);\n      };\n      const loadInstagram = async () => {\n        const instagramPosts = await instagramFetch();\n        addPosts(instagramPosts);\n      };\n\n      loadInstagram();\n      loadReddit();\n    };\n    loadPosts();\n  }\n\n\n  const removePostByPipe = () => {\n    //TODO\n  }\n\n  const getPosts = n => {\n    const toReturn = posts.slice(0, n);\n    setPosts(prevPosts => {\n      prevPosts.splice(0, n);\n      return prevPosts;\n    });\n    return toReturn;\n  };\n\n  return (\n    <>\n      <FeedView getPosts={getPosts} />;\n      <Nav refreshPosts={refreshPosts}/>\n    </>\n  );\n};\n\nexport default FeedController;\n"]},"metadata":{},"sourceType":"module"}
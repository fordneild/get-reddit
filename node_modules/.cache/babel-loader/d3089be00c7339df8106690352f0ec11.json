{"ast":null,"code":"var _jsxFileName = \"/Users/fordneild/workdir/get-reddit/src/Components/Feed/FeedController.js\";\nimport React, { useState, useEffect } from 'react';\nimport Feed from './index';\nimport fetchData from \"../../Services/useFetch\";\nimport fetchHTML from '../../Services/fetchHTML';\n\nconst FeedController = () => {\n  //keep track of all posts we want to show to the user\n  const [posts, setPosts] = useState([]);\n\n  const addPosts = newPosts => {\n    setPosts(prevPosts => [...prevPosts, ...newPosts]);\n  }; //on load, set posts\n\n\n  useEffect(() => {\n    const defaultSubs = ['memes', 'funny', 'AdviceAnimals', 'MemeEconomy', 'ComedyCemetery', 'dankmemes', 'ProgrammerHumor', 'ImGoingToHellForThis'];\n    const defaultInstgramSearches = ['meme'];\n\n    const loadSubredditPosts = async subs => {\n      const posts = await Promise.all(subs.map(async sub => {\n        return await fetchSubPosts(sub);\n      }));\n      const flatPosts = [].concat(...posts);\n      shuffleArray(flatPosts);\n      addPosts(flatPosts);\n    };\n\n    const loadInstagramMemes = async term => {\n      const posts = await Promise.all(term.map(async sub => {\n        return await fetchInstagramPosts(term);\n      }));\n      console.log('posts', posts); // const flatPosts = [].concat(...posts)\n      // shuffleArray(flatPosts)\n      // addPosts(flatPosts)\n    }; // const load9GagPosts = async (subs) => {\n    //     const posts = await Promise.all(subs.map(async (sub ) => {\n    //         return await fetch9GagPagePosts(sub)\n    //     }))\n    //     console.log('posts',posts)\n    //     // const flatPosts = [].concat(...posts)\n    //     // shuffleArray(flatPosts)\n    //     // addPosts(flatPosts)\n    // }\n\n\n    loadInstagramMemes(default9GagPages);\n    loadSubredditPosts(defaultSubs);\n  }, []);\n\n  const shuffleArray = array => {\n    for (var i = array.length - 1; i > 0; i--) {\n      var j = Math.floor(Math.random() * (i + 1));\n      var temp = array[i];\n      array[i] = array[j];\n      array[j] = temp;\n    }\n  };\n\n  const fetchInstagramPosts = async pageName => {\n    const page = await fetchData(`https://www.instagram.com/explore/tags/meme/?__a=1`);\n    console.log('page', page);\n  };\n\n  const fetchSubPosts = async subName => {\n    const sub = await fetchData(`https://www.reddit.com/r/${subName}/.json?`);\n    return sub.data.children.map(child => child.data).filter(post => {\n      return post && post.url && post.post_hint === \"image\";\n    });\n  };\n\n  const getPosts = n => {\n    const toReturn = posts.slice(0, n);\n    setPosts(prevPosts => {\n      prevPosts.splice(0, n);\n      return prevPosts;\n    });\n    return toReturn;\n  };\n\n  return React.createElement(Feed, {\n    getPosts: getPosts,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  });\n};\n\nexport default FeedController;","map":{"version":3,"sources":["/Users/fordneild/workdir/get-reddit/src/Components/Feed/FeedController.js"],"names":["React","useState","useEffect","Feed","fetchData","fetchHTML","FeedController","posts","setPosts","addPosts","newPosts","prevPosts","defaultSubs","defaultInstgramSearches","loadSubredditPosts","subs","Promise","all","map","sub","fetchSubPosts","flatPosts","concat","shuffleArray","loadInstagramMemes","term","fetchInstagramPosts","console","log","default9GagPages","array","i","length","j","Math","floor","random","temp","pageName","page","subName","data","children","child","filter","post","url","post_hint","getPosts","n","toReturn","slice","splice"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport Feed from './index'\nimport fetchData from \"../../Services/useFetch\";\nimport fetchHTML from '../../Services/fetchHTML';\n\n\nconst FeedController = () => {\n\n    //keep track of all posts we want to show to the user\n    const [posts, setPosts] = useState([])\n\n    const addPosts = (newPosts) => {\n        setPosts(prevPosts => [...prevPosts, ...newPosts])\n    }\n    \n    //on load, set posts\n    useEffect(() => {\n        const defaultSubs = ['memes','funny','AdviceAnimals','MemeEconomy','ComedyCemetery','dankmemes','ProgrammerHumor','ImGoingToHellForThis']\n        const defaultInstgramSearches = ['meme']\n        const loadSubredditPosts = async (subs) => {\n            const posts = await Promise.all(subs.map(async (sub ) => {\n                return await fetchSubPosts(sub)\n            }))\n            const flatPosts = [].concat(...posts)\n            shuffleArray(flatPosts)\n            addPosts(flatPosts)\n        }\n        const loadInstagramMemes = async (term) => {\n            const posts = await Promise.all(term.map(async (sub ) => {\n                return await fetchInstagramPosts(term)\n            }))\n            console.log('posts',posts)\n            // const flatPosts = [].concat(...posts)\n            // shuffleArray(flatPosts)\n            // addPosts(flatPosts)\n        }\n        // const load9GagPosts = async (subs) => {\n        //     const posts = await Promise.all(subs.map(async (sub ) => {\n        //         return await fetch9GagPagePosts(sub)\n        //     }))\n        //     console.log('posts',posts)\n        //     // const flatPosts = [].concat(...posts)\n        //     // shuffleArray(flatPosts)\n        //     // addPosts(flatPosts)\n        // }\n        loadInstagramMemes(default9GagPages)\n        loadSubredditPosts(defaultSubs)\n    },[])\n\n    const shuffleArray = (array) => {\n        for (var i = array.length - 1; i > 0; i--) {\n            var j = Math.floor(Math.random() * (i + 1));\n            var temp = array[i];\n            array[i] = array[j];\n            array[j] = temp;\n        }\n    }\n\n    const fetchInstagramPosts = async pageName => {\n        const page = await fetchData(`https://www.instagram.com/explore/tags/meme/?__a=1`)\n        console.log('page',page)\n    }\n\n    const fetchSubPosts = async subName => {\n        const sub = await fetchData(`https://www.reddit.com/r/${subName}/.json?`);\n        return sub.data.children.map(child => child.data).filter((post) => {\n            return post && post.url && post.post_hint === \"image\";\n          })\n    };\n\n\n    \n    const getPosts = (n) => {\n        const toReturn = posts.slice(0,n)\n        setPosts(prevPosts => {\n            prevPosts.splice(0,n)\n            return prevPosts\n        })\n        return toReturn\n    }\n\n    return(\n        <Feed getPosts={getPosts}/>\n    )\n}\n\nexport default FeedController"]},"metadata":{},"sourceType":"module"}
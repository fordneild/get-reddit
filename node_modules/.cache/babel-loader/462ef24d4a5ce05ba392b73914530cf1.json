{"ast":null,"code":"var _jsxFileName = \"/Users/fordneild/workdir/get-reddit/src/Components/Feed/FeedController.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Feed from \"./FeedView.js\";\nimport LocalStorage from \"../../Services/LocalStorage\";\nimport redditFetch from \"../../Services/redditFetch\";\nimport instagramFetch from \"../../Services/instagramFetch\";\nimport defaultInstagram from \"../../assets/defaultInstagram\";\nimport defaultSubreddits from \"../../assets/defaultSubreddits\";\n\nconst FeedController = () => {\n  //keep track of all posts we want to show to the user eventually\n  const [posts, setPosts] = useState([]); //on mount, load urls of images\n\n  useEffect(() => {\n    console.log(\"Hello world!\", LocalStorage.get('subreddits'));\n\n    const loadReddit = async subreddits => {\n      const redditPosts = await redditFetch(subreddits);\n      addPosts(redditPosts);\n    };\n\n    const loadInstagram = async ({\n      terms,\n      accounts\n    }) => {\n      const instaPosts = await instagramFetch(terms, accounts);\n      addPosts(instaPosts);\n    };\n\n    loadInstagram(defaultInstagram);\n    loadReddit(defaultSubreddits);\n  }, []);\n\n  const addPosts = newPosts => {\n    setPosts(prevPosts => {\n      const posts = [...prevPosts, ...newPosts];\n\n      for (var i = posts.length - 1; i > 0; i--) {\n        var j = Math.floor(Math.random() * (i + 1));\n        var temp = posts[i];\n        posts[i] = posts[j];\n        posts[j] = temp;\n      }\n\n      return posts;\n    });\n  };\n\n  const getPosts = n => {\n    const toReturn = posts.slice(0, n);\n    setPosts(prevPosts => {\n      prevPosts.splice(0, n);\n      return prevPosts;\n    });\n    return toReturn;\n  };\n\n  return React.createElement(Feed, {\n    getPosts: getPosts,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  });\n};\n\nexport default FeedController;","map":{"version":3,"sources":["/Users/fordneild/workdir/get-reddit/src/Components/Feed/FeedController.js"],"names":["React","useState","useEffect","Feed","LocalStorage","redditFetch","instagramFetch","defaultInstagram","defaultSubreddits","FeedController","posts","setPosts","console","log","get","loadReddit","subreddits","redditPosts","addPosts","loadInstagram","terms","accounts","instaPosts","newPosts","prevPosts","i","length","j","Math","floor","random","temp","getPosts","n","toReturn","slice","splice"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,IAAP,MAAiB,eAAjB;AACA,OAAOC,YAAP,MAAyB,6BAAzB;AACA,OAAOC,WAAP,MAAwB,4BAAxB;AACA,OAAOC,cAAP,MAA2B,+BAA3B;AACA,OAAOC,gBAAP,MAA6B,+BAA7B;AACA,OAAOC,iBAAP,MAA8B,gCAA9B;;AAGA,MAAMC,cAAc,GAAG,MAAM;AAC3B;AACA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBV,QAAQ,CAAC,EAAD,CAAlC,CAF2B,CAI3B;;AACAC,EAAAA,SAAS,CAAC,MAAM;AACdU,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA2BT,YAAY,CAACU,GAAb,CAAiB,YAAjB,CAA3B;;AACA,UAAMC,UAAU,GAAG,MAAOC,UAAP,IAAsB;AACvC,YAAMC,WAAW,GAAG,MAAMZ,WAAW,CAACW,UAAD,CAArC;AACAE,MAAAA,QAAQ,CAACD,WAAD,CAAR;AACD,KAHD;;AAIA,UAAME,aAAa,GAAG,OAAO;AAACC,MAAAA,KAAD;AAAQC,MAAAA;AAAR,KAAP,KAA6B;AACjD,YAAMC,UAAU,GAAG,MAAMhB,cAAc,CAACc,KAAD,EAAOC,QAAP,CAAvC;AACAH,MAAAA,QAAQ,CAACI,UAAD,CAAR;AACD,KAHD;;AAIAH,IAAAA,aAAa,CAACZ,gBAAD,CAAb;AACAQ,IAAAA,UAAU,CAACP,iBAAD,CAAV;AACD,GAZQ,EAYN,EAZM,CAAT;;AAcA,QAAMU,QAAQ,GAAGK,QAAQ,IAAI;AAC3BZ,IAAAA,QAAQ,CAACa,SAAS,IAAI;AACpB,YAAMd,KAAK,GAAG,CAAC,GAAGc,SAAJ,EAAe,GAAGD,QAAlB,CAAd;;AACA,WAAK,IAAIE,CAAC,GAAGf,KAAK,CAACgB,MAAN,GAAe,CAA5B,EAA+BD,CAAC,GAAG,CAAnC,EAAsCA,CAAC,EAAvC,EAA2C;AACzC,YAAIE,CAAC,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,MAAiBL,CAAC,GAAG,CAArB,CAAX,CAAR;AACA,YAAIM,IAAI,GAAGrB,KAAK,CAACe,CAAD,CAAhB;AACAf,QAAAA,KAAK,CAACe,CAAD,CAAL,GAAWf,KAAK,CAACiB,CAAD,CAAhB;AACAjB,QAAAA,KAAK,CAACiB,CAAD,CAAL,GAAWI,IAAX;AACD;;AACD,aAAOrB,KAAP;AACD,KATO,CAAR;AAUD,GAXD;;AAaA,QAAMsB,QAAQ,GAAGC,CAAC,IAAI;AACpB,UAAMC,QAAQ,GAAGxB,KAAK,CAACyB,KAAN,CAAY,CAAZ,EAAeF,CAAf,CAAjB;AACAtB,IAAAA,QAAQ,CAACa,SAAS,IAAI;AACpBA,MAAAA,SAAS,CAACY,MAAV,CAAiB,CAAjB,EAAoBH,CAApB;AACA,aAAOT,SAAP;AACD,KAHO,CAAR;AAIA,WAAOU,QAAP;AACD,GAPD;;AASA,SAAO,oBAAC,IAAD;AAAM,IAAA,QAAQ,EAAEF,QAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAP;AACD,CA1CD;;AA4CA,eAAevB,cAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Feed from \"./FeedView.js\";\nimport LocalStorage from \"../../Services/LocalStorage\"\nimport redditFetch from \"../../Services/redditFetch\"\nimport instagramFetch from \"../../Services/instagramFetch\"\nimport defaultInstagram from \"../../assets/defaultInstagram\"\nimport defaultSubreddits from \"../../assets/defaultSubreddits\"\n\n\nconst FeedController = () => {\n  //keep track of all posts we want to show to the user eventually\n  const [posts, setPosts] = useState([]);\n\n  //on mount, load urls of images\n  useEffect(() => {\n    console.log(\"Hello world!\",LocalStorage.get('subreddits'))\n    const loadReddit = async (subreddits) => {\n      const redditPosts = await redditFetch(subreddits)\n      addPosts(redditPosts)\n    }\n    const loadInstagram = async ({terms, accounts}) => {\n      const instaPosts = await instagramFetch(terms,accounts)\n      addPosts(instaPosts)\n    }\n    loadInstagram(defaultInstagram)\n    loadReddit(defaultSubreddits)\n  }, []);\n\n  const addPosts = newPosts => {\n    setPosts(prevPosts => {\n      const posts = [...prevPosts, ...newPosts];\n      for (var i = posts.length - 1; i > 0; i--) {\n        var j = Math.floor(Math.random() * (i + 1));\n        var temp = posts[i];\n        posts[i] = posts[j];\n        posts[j] = temp;\n      }\n      return posts;\n    });\n  };\n\n  const getPosts = n => {\n    const toReturn = posts.slice(0, n);\n    setPosts(prevPosts => {\n      prevPosts.splice(0, n);\n      return prevPosts;\n    });\n    return toReturn;\n  };\n\n  return <Feed getPosts={getPosts} />;\n};\n\nexport default FeedController;\n"]},"metadata":{},"sourceType":"module"}
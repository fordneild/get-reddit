{"ast":null,"code":"var _jsxFileName = \"/Users/fordneild/workdir/get-reddit/src/Components/Feed/FeedController.js\";\nimport React, { useState, useEffect, useCallback } from 'react';\nimport Feed from './index';\nimport fetchData from \"../../Services/useFetch\";\n\nconst FeedController = () => {\n  const [posts, setPosts] = useState([]);\n  const [loading, setLoading] = useState(false); //on load, set posts\n\n  useEffect(() => {\n    const defaultSubs = ['memes', 'funny', 'facepalm', 'AdviceAnimals', 'MemeEconomy', 'ComedyCemetery', 'dankmemes'];\n\n    const loadPosts = async subs => {\n      setLoading(true);\n      const posts = await Promise.all(subs.map(async (sub, index) => {\n        return await fetchSubPosts(sub);\n      }));\n      const flatPosts = [].concat(...posts);\n      setPosts(flatPosts);\n    };\n\n    loadPosts(defaultSubs);\n    setLoading(false);\n  }, []);\n\n  const fetchSubPosts = async subName => {\n    const sub = await fetchData(`https://www.reddit.com/r/${subName}/.json?`);\n    return sub.data.children;\n  };\n\n  const getPosts = n => {\n    return posts.slice(0, n);\n  };\n\n  const servePosts = useCallback(n => {\n    console.log(\"posts in serve\", posts);\n    let served = setPosts(prevPosts => {\n      served = prevPosts.splice(0, n);\n      return prevPosts;\n    });\n    return served;\n  }, [loading, setLoading]);\n  return (// <Feed getPosts={servePosts}/>\n    React.createElement(Feed, {\n      getPosts: getPosts,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    })\n  );\n};\n\nexport default FeedController;","map":{"version":3,"sources":["/Users/fordneild/workdir/get-reddit/src/Components/Feed/FeedController.js"],"names":["React","useState","useEffect","useCallback","Feed","fetchData","FeedController","posts","setPosts","loading","setLoading","defaultSubs","loadPosts","subs","Promise","all","map","sub","index","fetchSubPosts","flatPosts","concat","subName","data","children","getPosts","n","slice","servePosts","console","log","served","prevPosts","splice"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,EAAoCC,WAApC,QAAsD,OAAtD;AACA,OAAOC,IAAP,MAAiB,SAAjB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;;AAGA,MAAMC,cAAc,GAAG,MAAM;AACzB,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACQ,OAAD,EAAUC,UAAV,IAAwBT,QAAQ,CAAC,KAAD,CAAtC,CAFyB,CAIzB;;AACAC,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMS,WAAW,GAAG,CAAC,OAAD,EAAS,OAAT,EAAiB,UAAjB,EAA4B,eAA5B,EAA4C,aAA5C,EAA0D,gBAA1D,EAA2E,WAA3E,CAApB;;AACA,UAAMC,SAAS,GAAG,MAAOC,IAAP,IAAgB;AAC9BH,MAAAA,UAAU,CAAC,IAAD,CAAV;AACA,YAAMH,KAAK,GAAG,MAAMO,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACG,GAAL,CAAS,OAAOC,GAAP,EAAYC,KAAZ,KAAsB;AAC3D,eAAO,MAAMC,aAAa,CAACF,GAAD,CAA1B;AACH,OAF+B,CAAZ,CAApB;AAGA,YAAMG,SAAS,GAAG,GAAGC,MAAH,CAAU,GAAGd,KAAb,CAAlB;AACAC,MAAAA,QAAQ,CAACY,SAAD,CAAR;AAEH,KARD;;AASAR,IAAAA,SAAS,CAACD,WAAD,CAAT;AACAD,IAAAA,UAAU,CAAC,KAAD,CAAV;AACH,GAbQ,EAaP,EAbO,CAAT;;AAiBA,QAAMS,aAAa,GAAG,MAAMG,OAAN,IAAiB;AACnC,UAAML,GAAG,GAAG,MAAMZ,SAAS,CAAE,4BAA2BiB,OAAQ,SAArC,CAA3B;AACA,WAAOL,GAAG,CAACM,IAAJ,CAASC,QAAhB;AACH,GAHD;;AAMA,QAAMC,QAAQ,GAAIC,CAAD,IAAO;AACpB,WAAOnB,KAAK,CAACoB,KAAN,CAAY,CAAZ,EAAcD,CAAd,CAAP;AACH,GAFD;;AAGA,QAAME,UAAU,GAAGzB,WAAW,CAAEuB,CAAD,IAAO;AAClCG,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BvB,KAA9B;AACA,QAAIwB,MAAM,GACVvB,QAAQ,CAACwB,SAAS,IAAI;AAClBD,MAAAA,MAAM,GAAGC,SAAS,CAACC,MAAV,CAAiB,CAAjB,EAAmBP,CAAnB,CAAT;AACA,aAAOM,SAAP;AACH,KAHO,CADR;AAKA,WAAOD,MAAP;AACH,GAR6B,EAQ5B,CAACtB,OAAD,EAAUC,UAAV,CAR4B,CAA9B;AAWA,SACI;AACA,wBAAC,IAAD;AAAM,MAAA,QAAQ,EAAEe,QAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFJ;AAKH,CA/CD;;AAiDA,eAAenB,cAAf","sourcesContent":["import React, {useState, useEffect, useCallback} from 'react'\nimport Feed from './index'\nimport fetchData from \"../../Services/useFetch\";\n\n\nconst FeedController = () => {\n    const [posts, setPosts] = useState([])\n    const [loading, setLoading] = useState(false)\n\n    //on load, set posts\n    useEffect(() => {\n        const defaultSubs = ['memes','funny','facepalm','AdviceAnimals','MemeEconomy','ComedyCemetery','dankmemes']\n        const loadPosts = async (subs) => {\n            setLoading(true)\n            const posts = await Promise.all(subs.map(async (sub, index) => {\n                return await fetchSubPosts(sub)\n            }))\n            const flatPosts = [].concat(...posts)\n            setPosts(flatPosts)\n            \n        }\n        loadPosts(defaultSubs)\n        setLoading(false)\n    },[])\n\n    \n    \n    const fetchSubPosts = async subName => {\n        const sub = await fetchData(`https://www.reddit.com/r/${subName}/.json?`);\n        return sub.data.children\n    };\n\n    \n    const getPosts = (n) => {\n        return posts.slice(0,n)\n    }\n    const servePosts = useCallback((n) => {\n        console.log(\"posts in serve\", posts)\n        let served = \n        setPosts(prevPosts => {\n            served = prevPosts.splice(0,n)\n            return prevPosts\n        })\n        return served\n    },[loading, setLoading])\n\n    \n    return(\n        // <Feed getPosts={servePosts}/>\n        <Feed getPosts={getPosts}/>\n\n    )\n}\n\nexport default FeedController"]},"metadata":{},"sourceType":"module"}
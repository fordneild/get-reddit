{"ast":null,"code":"var _jsxFileName = \"/Users/fordneild/workdir/get-reddit/src/Components/Feed/FeedController.js\";\nimport React, { useState, useEffect } from 'react';\nimport Feed from './index';\nimport fetchData from \"../../Services/useFetch\";\n\nconst FeedController = () => {\n  const [posts, setPosts] = useState([]); //on load, set posts\n\n  useEffect(() => {\n    const defaultSubs = ['memes', 'funny', 'AdviceAnimals', 'MemeEconomy', 'ComedyCemetery', 'dankmemes', 'BlackPeopleTwitter'];\n\n    const loadPosts = async subs => {\n      const posts = await Promise.all(subs.map(async (sub, index) => {\n        return await fetchSubPosts(sub);\n      }));\n      const flatPosts = [].concat(...posts);\n      setPosts(flatPosts);\n    };\n\n    loadPosts(defaultSubs);\n    shufflePosts();\n  }, []);\n\n  const shufflePosts = () => {\n    setPosts(prevPosts => {\n      for (var i = prevPosts.length - 1; i > 0; i--) {\n        var j = Math.floor(Math.random() * (i + 1));\n        var temp = prevPosts[i];\n        prevPosts[i] = prevPosts[j];\n        prevPosts[j] = temp;\n      }\n\n      return prevPosts;\n    });\n  };\n\n  const fetchSubPosts = async subName => {\n    const sub = await fetchData(`https://www.reddit.com/r/${subName}/.json?`);\n    return sub.data.children.map(child => child.data);\n  };\n\n  const getPosts = n => {\n    const toReturn = posts.slice(0, n);\n    setPosts(prevPosts => {\n      prevPosts.splice(0, n);\n      return prevPosts;\n    });\n    return toReturn;\n  };\n\n  return React.createElement(Feed, {\n    getPosts: getPosts,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  });\n};\n\nexport default FeedController;","map":{"version":3,"sources":["/Users/fordneild/workdir/get-reddit/src/Components/Feed/FeedController.js"],"names":["React","useState","useEffect","Feed","fetchData","FeedController","posts","setPosts","defaultSubs","loadPosts","subs","Promise","all","map","sub","index","fetchSubPosts","flatPosts","concat","shufflePosts","prevPosts","i","length","j","Math","floor","random","temp","subName","data","children","child","getPosts","n","toReturn","slice","splice"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,OAAOC,IAAP,MAAiB,SAAjB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;;AAGA,MAAMC,cAAc,GAAG,MAAM;AACzB,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBN,QAAQ,CAAC,EAAD,CAAlC,CADyB,CAEzB;;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMM,WAAW,GAAG,CAAC,OAAD,EAAS,OAAT,EAAiB,eAAjB,EAAiC,aAAjC,EAA+C,gBAA/C,EAAgE,WAAhE,EAA4E,oBAA5E,CAApB;;AACA,UAAMC,SAAS,GAAG,MAAOC,IAAP,IAAgB;AAC9B,YAAMJ,KAAK,GAAG,MAAMK,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACG,GAAL,CAAS,OAAOC,GAAP,EAAYC,KAAZ,KAAsB;AAC3D,eAAO,MAAMC,aAAa,CAACF,GAAD,CAA1B;AACH,OAF+B,CAAZ,CAApB;AAGA,YAAMG,SAAS,GAAG,GAAGC,MAAH,CAAU,GAAGZ,KAAb,CAAlB;AACAC,MAAAA,QAAQ,CAACU,SAAD,CAAR;AAEH,KAPD;;AAQAR,IAAAA,SAAS,CAACD,WAAD,CAAT;AACAW,IAAAA,YAAY;AACf,GAZQ,EAYP,EAZO,CAAT;;AAcA,QAAMA,YAAY,GAAG,MAAM;AACvBZ,IAAAA,QAAQ,CAACa,SAAS,IAAI;AAClB,WAAK,IAAIC,CAAC,GAAGD,SAAS,CAACE,MAAV,GAAmB,CAAhC,EAAmCD,CAAC,GAAG,CAAvC,EAA0CA,CAAC,EAA3C,EAA+C;AAC3C,YAAIE,CAAC,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,MAAiBL,CAAC,GAAG,CAArB,CAAX,CAAR;AACA,YAAIM,IAAI,GAAGP,SAAS,CAACC,CAAD,CAApB;AACAD,QAAAA,SAAS,CAACC,CAAD,CAAT,GAAeD,SAAS,CAACG,CAAD,CAAxB;AACAH,QAAAA,SAAS,CAACG,CAAD,CAAT,GAAeI,IAAf;AACH;;AACD,aAAOP,SAAP;AACH,KARO,CAAR;AASH,GAVD;;AAWA,QAAMJ,aAAa,GAAG,MAAMY,OAAN,IAAiB;AACnC,UAAMd,GAAG,GAAG,MAAMV,SAAS,CAAE,4BAA2BwB,OAAQ,SAArC,CAA3B;AACA,WAAOd,GAAG,CAACe,IAAJ,CAASC,QAAT,CAAkBjB,GAAlB,CAAsBkB,KAAK,IAAIA,KAAK,CAACF,IAArC,CAAP;AACH,GAHD;;AAKA,QAAMG,QAAQ,GAAIC,CAAD,IAAO;AACpB,UAAMC,QAAQ,GAAG5B,KAAK,CAAC6B,KAAN,CAAY,CAAZ,EAAcF,CAAd,CAAjB;AACA1B,IAAAA,QAAQ,CAACa,SAAS,IAAI;AAClBA,MAAAA,SAAS,CAACgB,MAAV,CAAiB,CAAjB,EAAmBH,CAAnB;AACA,aAAOb,SAAP;AACH,KAHO,CAAR;AAIA,WAAOc,QAAP;AACH,GAPD;;AASA,SACI,oBAAC,IAAD;AAAM,IAAA,QAAQ,EAAEF,QAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ;AAGH,CA9CD;;AAgDA,eAAe3B,cAAf","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport Feed from './index'\nimport fetchData from \"../../Services/useFetch\";\n\n\nconst FeedController = () => {\n    const [posts, setPosts] = useState([])\n    //on load, set posts\n\n    useEffect(() => {\n        const defaultSubs = ['memes','funny','AdviceAnimals','MemeEconomy','ComedyCemetery','dankmemes','BlackPeopleTwitter']\n        const loadPosts = async (subs) => {\n            const posts = await Promise.all(subs.map(async (sub, index) => {\n                return await fetchSubPosts(sub)\n            }))\n            const flatPosts = [].concat(...posts)\n            setPosts(flatPosts)\n            \n        }\n        loadPosts(defaultSubs)\n        shufflePosts()\n    },[])\n\n    const shufflePosts = () => {\n        setPosts(prevPosts => {\n            for (var i = prevPosts.length - 1; i > 0; i--) {\n                var j = Math.floor(Math.random() * (i + 1));\n                var temp = prevPosts[i];\n                prevPosts[i] = prevPosts[j];\n                prevPosts[j] = temp;\n            }\n            return prevPosts\n        })\n    }\n    const fetchSubPosts = async subName => {\n        const sub = await fetchData(`https://www.reddit.com/r/${subName}/.json?`);\n        return sub.data.children.map(child => child.data)\n    };\n    \n    const getPosts = (n) => {\n        const toReturn = posts.slice(0,n)\n        setPosts(prevPosts => {\n            prevPosts.splice(0,n)\n            return prevPosts\n        })\n        return toReturn\n    }\n\n    return(\n        <Feed getPosts={getPosts}/>\n    )\n}\n\nexport default FeedController"]},"metadata":{},"sourceType":"module"}